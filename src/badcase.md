# 游戏开发常见错误和最佳实践记录

## 1. 状态管理错误
### Bad Case:
- 状态定义不明确
- 多处维护同一状态
- 状态更新不同步
### Best Practice:
- 明确定义所有可能的状态（如：0-场景中，1-队列中，2-已消除）
- 集中管理状态，避免分散维护
- 确保状态更新的原子性和同步性

## 2. 视图重复渲染
### Bad Case:
- 同一元素在多个地方显示
- 使用多种方式控制同一元素的显示状态
### Best Practice:
- 确保每个UI元素只有一个渲染来源
- 统一使用一种方式控制元素显示（如：通过v-if/v-show或opacity）

## 3. 碰撞检测问题
### Bad Case:
- 忽略元素实际尺寸
- 简单的坐标比较
### Best Practice:
- 考虑元素的完整碰撞箱（宽度、高度、偏移量）
- 实现精确的碰撞检测算法

## 4. 事件处理问题
### Bad Case:
- 没有状态锁定机制
- 事件处理中状态更新不完整
### Best Practice:
- 使用animating等标志位锁定操作
- 确保事件处理中完整更新所有相关状态
- 添加适当的防抖和节流

## 5. 动画和交互时序
### Bad Case:
- 动画过程中允许新操作
- 状态更新和动画不同步
### Best Practice:
- 动画进行时锁定用户操作
- 使用async/await确保动画和状态更新同步
- 合理设置动画时长和过渡效果

## 6. 性能优化建议
### Bad Case:
- 频繁的DOM操作
- 复杂的计算没有缓存
### Best Practice:
- 使用Vue的响应式系统优化更新
- 对复杂计算结果进行缓存
- 使用适当的计算属性和监听器

## 7. 代码组织
### Bad Case:
- 业务逻辑和视图逻辑混合
- 重复代码
### Best Practice:
- 将业务逻辑抽离为独立的服务
- 使用组合式API组织代码
- 提取公共功能为可复用的函数